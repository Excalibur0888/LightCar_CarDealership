# Автосалон - База данных PostgreSQL

Этот проект содержит SQL скрипты для создания и заполнения базы данных автосалона на основе предоставленной ER-диаграммы.

## Содержимое

- `create_tables.sql` - Скрипт для создания всех таблиц базы данных
- `populate_data.sql` - Скрипт для заполнения таблиц тестовыми данными
- `setup_database.sql` - Основной скрипт для создания базы данных с кодировкой UTF-8

## Требования

- PostgreSQL 10 или выше
- Права на создание баз данных

## Инструкция по установке

### Создание базы данных

Выполните одну команду для создания всей базы данных:

```
psql -U postgres -f setup_database.sql
```

Если у вас установлен пароль для пользователя postgres, используйте:

```
psql -U postgres -W -f setup_database.sql
```

После выполнения этой команды база данных будет создана с правильной кодировкой UTF-8, все таблицы будут созданы и заполнены тестовыми данными.

## Проверка кодировки

Если возникают проблемы с отображением кириллицы, можно проверить и установить кодировку:

```sql
-- Проверка текущей кодировки
SHOW client_encoding;
SHOW server_encoding;

-- Установка UTF-8 если необходимо
SET client_encoding = 'UTF8';
```

## Проверка и использование

После установки вы можете подключиться к базе данных:

```
psql -U postgres -d car_dealership
```

Пример запроса для просмотра автомобилей с деталями модели и производителя:

```sql
SELECT 
    п."название_производителя" AS "Производитель", 
    м."название_модели" AS "Модель",
    а."цвет" AS "Цвет", 
    а."год_выпуска" AS "Год" 
FROM "Автомобиль" а
JOIN "Модель" м ON а."id_модели" = м."id_модели"
JOIN "Производитель" п ON м."id_производителя" = п."id_производителя";
```

## Структура базы данных

База данных включает следующие таблицы:

1. **Производитель** - информация о производителе автомобилей
2. **Модель** - модели автомобилей от производителей
3. **Автомобиль** - конкретные автомобили в автосалоне
4. **Опция** - дополнительные опции для автомобилей
5. **Покупатель** - информация о клиентах
6. **Сотрудник** - информация о персонале автосалона
7. **Продажа** - записи о продажах автомобилей
8. **Платеж** - информация о платежах
9. **Тест_драйв** - записи о проведенных тест-драйвах
10. **Автомобиль_Опция** - связь между автомобилями и установленными опциями 